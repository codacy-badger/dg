// Helper for properly flowing project cards
@mixin cards-per($num) {
	width: span($col/$num);
	&.wide {
		width: span($col/$num * 2);
	}
}

// Project card component
.proj-card {
	$max-cards: 12;
	$card-height: 24vw;
	$n-per-row: 3;
	$n-per-row-small: 2;
	$shadow-blur: 4px;
	$shadow-color: transparentize($color-dim, 0.4);
	$hover-scale: 0.96;
	$tag-padding: 0.5em;
	$text-margin: $tag-padding 0;
	$desc-size: 0.9em;
	$arr-size: 2.0em;

	position: relative;
	height: $card-height;

	// Pops in each with a delay at beginning
	@extend %animate-pop-in;
	@for $i from 1 through $max-cards {
	 	&:nth-child(#{$i}) {
	 		animation-delay: $pop-in-delay * ($i+1);
	 	}
	}

	// Grids
	@include cards-per($n-per-row); // regular grid
	@include media-query($two-column) {
		@include cards-per($n-per-row-small); // smaller grid
	}
	@include media-query($one-column) {
		@include cards-per(1); // full width
	}

	// Hover state
	&:hover {
		.data, img {
			transform: scale($hover-scale);
		}
		img {
			@include box-shadow($shadow-color, $blur: $shadow-blur);
		}
	}

	img {
		@include transition(transform);
		@extend %flush;
		@extend %overlay;
	}

	.data {
		@include transition(box-shadow, transform);
		position: relative;
		height: 100%;
		padding: $edge-padding/2 $edge-padding;
		color: $color-text-light;
		h3 {
			@include span(2*$col/3);
		}
		p {
			@include span($col/2);
			position: absolute;
			bottom: 0;
			font-size: $desc-size;
			&.arr {
				@include span($col);
				font-size: $arr-size;
				text-align: right;
				right: 0;
				margin-right: $edge-padding;
			}
		}
	}
}